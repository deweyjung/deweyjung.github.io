---
title: 용어
date: 2019-09-17 19:15:20
tags: docker
categories:
    - 00. Docker
    - 00. 용어
---
환경 : CentOS



명령어 모음



docker 설치  
sudo yum -y update  
sudo -y install docker docker-registry  
systemctl enable docker.service  
systemctl status docker.service  



일반계정으로 sudo 없이 docker 사용  

sudo groupadd docker  

sudo usermod -aG docker $USER  

ls -l /var/run/docker.sock  

sudo chown root:docker /var/run/docker.sock  



이미지 다운로드  
docker pull centos or ubuntu or etc...  


이미지 실행  
sudo docker run -t -i {image name}  



이미지 삭제  

sudo docker rmi {image id}  



이미지 리스트  
sudo docker images  



이미지로 컨테이너 실행(-i 인터렉티브 모드, -t tty 모드, -d detached mode, -name 컨테이너 이름 설정, -v 마운트) - exit하면 컨테이너 함께 종료  

sudo docker run -it --name {container name} -p 8080:8080 -v {host folder path}:{container folder path}:z centos /bin/bash  



이미지로 컨테이너 실행시 포트 설정  

docker run -i -t --name {container name} -p 80:80 -p 81:8080 -p 82:8090 ubuntu:14.04  



도커에서 컨테이너 명령어 실행  

docker exec -it mysql /bin/bash  



볼륨 사용 예(호스트 : /my/own/datadir, 컨테이너 : /var/lib/mysql)  

docker run -d -p 3306:3306 \  
-e MYSQL_ALLOW_EMPTY_PASSWORD=true \  
--name mysql \  
-v /my/own/datadir:/var/lib/mysql \ # <- volume mount  
mysql:5.7  



컨테이너 리스트  

docker ps -a  



컨테이너 재시작  

docker restart {container id}  



컨테이너 중지  

docker stop {container id}  



컨테이너 접속  
docker attach {container id}  



컨테이너 삭제  
docker rm {container id}  



컨테이너 수정 사항  
docker diff {container id}  



컨테이너 커밋 - 새로운 이미지 생성  
docker commit {container id} {repository name/image name:image tag}  



컨테이너 STATUS 확인  

docker container inspect {container id}  



이미지 저장  

sudo docker commit -p {CONTAINER ID} {NAMES}  



이미지 백업  

sudo docker save -o {저장할이름}.tar {이미지 이름}  



백업이미지 복구  

sudo docker load < {백업한 파일이름}.tar  



Docker Compose 설치  

curl -L "https://github.com/docker/compose/releases/download/1.9.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose  
chmod +x /usr/local/bin/docker-compose  
# test  
docker-compose version  



Docker Compose 예  

version: '2'  

services:  
db:  
image: mysql:5.7  
volumes:  
\- db_data:/var/lib/mysql  
restart: always  
environment:  
MYSQL_ROOT_PASSWORD: wordpress  
MYSQL_DATABASE: wordpress  
MYSQL_USER: wordpress  
MYSQL_PASSWORD: wordpress  

wordpress:  
depends_on:  
\- db  
image: wordpress:latest   
volumes:   
\- wp_data:/var/www/html  
ports:  
\- "8000:80"  
restart: always  
environment:  
WORDPRESS_DB_HOST: db:3306  
WORDPRESS_DB_PASSWORD: wordpress  
volumes:  
db_data:  
wp_data:  



Docker Compose 실행  

vi docker-compose.yml  

docker-compose up  
